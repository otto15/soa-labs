@if (products$ | async; as products) {
    <table class="tui-table">
        <tbody>
            <tr class="tui-table__tr tui-table__tr_border_none">
                <th class="tui-table__th tui-table__th_first">ID</th>
                <th class="tui-table__th">Название</th>
                <th class="tui-table__th">Цена</th>
                <th class="tui-table__th">Артикул</th>
                <th class="tui-table__th tui-table__th_last">Действия</th>
            </tr>
            @for (product of products; track product.id) {
                <tr class="tui-table__tr tui-table__tr_border_none">
                    <td class="tui-table__td tui-table__td_first">
                        {{ product.id }}
                    </td>
                    <td class="tui-table__td">
                        {{ product.name }}
                    </td>
                    <td class="tui-table__td">
                        {{ product.price }}
                    </td>
                    <td class="tui-table__td">
                        {{ product.partNumber }}
                    </td>
                    <td class="tui-table__td tui-table__td_last">
                        <div class="actions-container">
                            <button 
                                tuiButton
                                size="xs"
                                appearance="secondary"
                                shape="rounded"
                                tuiHint="Полная информация о продукте"
                                iconStart="@tui.eye"
                                (click)="setViewProduct(productView, product)"
                            >
                            </button>
                        </div>
                    </td>
                </tr>
            }
        </tbody>
    </table>
}

<ng-template #productView>
    @if (selectedProduct$ | async; as selectedProduct) {
        <lib-product-view 
            [product]="selectedProduct">
        </lib-product-view>
    }
</ng-template>